import{a as B,r as l,o as P,c as e,b as t,h as r,u as d,t as i,F as k,g as y,f as g,i as I,v as L,j as V,k as A,z as N,l as o,_ as j}from"./index-bf26fcf4.js";import{A as F}from"./arrow-left-3d4fb9cc.js";import{c as f}from"./createLucideIcon-6f8267e0.js";import{P as K}from"./palette-9c021394.js";import{M as O}from"./message-circle-13c1f542.js";/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=f("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=f("share",[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]]),E={class:"work-detail-page"},G={class:"nav-bar"},H={class:"work-content-area"},U={key:0,class:"work-display"},q={class:"work-header"},J={class:"work-title"},Q={class:"work-tags"},X={class:"work-main"},Y={key:0,class:"poem-display"},Z={class:"poem-text"},tt={key:1,class:"image-display"},st={class:"image-placeholder"},et={class:"image-desc"},ot={class:"interaction-section"},at={class:"interaction-stats"},nt={class:"stat-item"},it={class:"stat-count"},ct={class:"stat-item"},lt={class:"stat-count"},rt={class:"comments-area"},dt={key:0,class:"empty-comments"},ut={key:1,class:"comments-list"},mt={class:"comment-content"},_t={class:"comment-time"},vt={class:"input-area safe-area-bottom"},pt={class:"comment-input-container"},ht=["disabled"],kt=B({__name:"WorkDetailPage",setup(yt){const b=A(),w=N(),a=l(null),u=l([]),c=l(""),p=l(0),v=l(0),C=()=>{b.back()},D=()=>{console.log("分享作品")},M=()=>{console.log("重新生成作品")},x=()=>{console.log("保存到相册")},S=()=>{console.log("投流光瓶")},h=()=>{var s;if(!c.value.trim())return;const m={id:Date.now().toString(),work_id:((s=a.value)==null?void 0:s.id)||"",user_id:"current-user",type:"comment",content:c.value,created_at:new Date().toISOString()};u.value.unshift(m),v.value++,c.value=""},z=m=>{const s=new Date(m),W=new Date().getTime()-s.getTime(),_=Math.floor(W/(1e3*60*60));return _<1?"刚刚":_<24?`${_}小时前`:`${Math.floor(_/24)}天前`},T=()=>{a.value={id:w.params.id,user_id:"current-user",session_id:"session-1",source_message_id:"msg-1",modality:"poem",title:"深夜独白",desc:`夜深人静时
思绪如潮涌
孤独中寻找
心灵的共鸣

文字是我唯一的朋友
在这无声的夜里
倾诉着内心的秘密`,emotion_labels:["孤独","深夜","思考","内省"],visibility:"private",created_at:new Date(Date.now()-1*24*60*60*1e3).toISOString()},p.value=Math.floor(Math.random()*50)+10,v.value=u.value.length};return P(()=>{T()}),(m,s)=>(o(),e("div",E,[s[6]||(s[6]=t("div",{class:"status-bar safe-area-top"},null,-1)),t("div",G,[t("button",{class:"back-btn",onClick:C},[r(d(F),{size:20})]),s[1]||(s[1]=t("h1",{class:"nav-title"},"作品详情",-1)),t("button",{class:"share-btn",onClick:D},[r(d($),{size:20})])]),t("div",H,[a.value?(o(),e("div",U,[t("div",q,[t("h2",J,i(a.value.title),1),t("div",Q,[(o(!0),e(k,null,y(a.value.emotion_labels,n=>(o(),e("span",{key:n,class:"tag"},i(n),1))),128))])]),t("div",X,[a.value.modality==="poem"?(o(),e("div",Y,[t("div",Z,i(a.value.desc),1)])):a.value.modality==="image"?(o(),e("div",tt,[t("div",st,[r(d(K),{size:48}),s[2]||(s[2]=t("span",null,"画作展示",-1))]),t("div",et,i(a.value.desc),1)])):g("",!0)]),t("div",{class:"work-actions"},[t("button",{class:"action-btn primary",onClick:M},"换形态"),t("button",{class:"action-btn secondary",onClick:x},"保存"),t("button",{class:"action-btn secondary",onClick:S},"投流光瓶")])])):g("",!0),t("div",ot,[t("div",at,[t("div",nt,[r(d(R),{size:16}),t("span",it,i(p.value),1)]),t("div",ct,[r(d(O),{size:16}),t("span",lt,i(v.value),1)])]),t("div",rt,[s[5]||(s[5]=t("h3",{class:"comments-title"},"共鸣评论",-1)),u.value.length===0?(o(),e("div",dt,[...s[3]||(s[3]=[t("div",{class:"empty-text"},"还没有人留下共鸣，成为第一个吧",-1)])])):(o(),e("div",ut,[(o(!0),e(k,null,y(u.value,n=>(o(),e("div",{key:n.id,class:"comment-item"},[s[4]||(s[4]=t("div",{class:"comment-author"},"匿名用户",-1)),t("div",mt,i(n.content),1),t("div",_t,i(z(n.created_at)),1)]))),128))]))])])]),t("div",vt,[t("div",pt,[I(t("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>c.value=n),type:"text",class:"comment-input",placeholder:"写下你的共鸣...",onKeyup:V(h,["enter"])},null,544),[[L,c.value]]),t("button",{class:"submit-btn",onClick:h,disabled:!c.value.trim()}," 发送 ",8,ht)])])]))}});const Dt=j(kt,[["__scopeId","data-v-95f090ce"]]);export{Dt as default};
